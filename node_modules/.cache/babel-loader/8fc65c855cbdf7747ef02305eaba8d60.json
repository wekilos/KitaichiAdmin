{"ast":null,"code":"import _slicedToArray from\"/Users/wekilos1902gmail.com/Desktop/kitaichi/kitaichi-admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import{MailFilled,LockFilled,EyeFilled,EyeInvisibleFilled,PhoneFilled,CheckCircleFilled}from\"@ant-design/icons\";import{message}from\"antd\";import\"antd/dist/antd.css\";import\"./login.css\";import{axiosInstance}from\"../../utils/axiosIntance\";import{useHistory}from\"react-router-dom\";import{SebedimContext}from\"../../context/sebedim\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useContext=useContext(SebedimContext),dil=_useContext.dil;var history=useHistory();var _useState=useState(\"+993\"),_useState2=_slicedToArray(_useState,2),phonenumber=_useState2[0],setPhonenumber=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),code=_useState4[0],setCode=_useState4[1];var _useState5=useState(\"phone\"),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],setType=_useState6[1];var CheckPhone=function CheckPhone(){axiosInstance.post(\"/api/admin/login\",{phonenumber:phonenumber}).then(function(data){if(data.data.login){setType(\"code\");message.success(data.data.msg);}else{message.warning(data.data.msg);console.log(data.data.msg);}}).catch(function(err){console.log(err);message.warn(err.msg);});};var CheckCode=function CheckCode(){axiosInstance.post(\"/api/admin/check\",{phonenumber:phonenumber,code:code}).then(function(data){console.log(data.data);if(data.data.login){message.success(data.data.msg);localStorage.setItem(\"userData\",JSON.stringify(data.data));history.push({pathname:\"/orders\"});}else{message.warning(data.data.msg);console.log(data.data.msg);}}).catch(function(err){console.log(err);message.warn(err.msg);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"body\",children:[type==\"phone\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"login-container mt-10 rounded-[8px]\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h2\",children:dil===\"tm\"?\"Gaýtadan hoş geldiňiz\":dil===\"ru\"?\"Добро пожаловать\":\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p\",children:dil===\"tm\"?\"Girmek üçin şahsyýet maglumatlaryňyzy giriziň!\":dil===\"ru\"?\"Введите свои учетные данные для доступа!\":\"Enter your credentials to access!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container items-center flex\",children:[/*#__PURE__*/_jsx(PhoneFilled,{className:\"icon rotate-[100deg]\"}),/*#__PURE__*/_jsx(\"input\",{onKeyPress:function onKeyPress(e){return e.key==\"Enter\"?CheckPhone():null;},className:\"input items-center flex\",value:phonenumber,type:\"text\",autoFocus:type==\"phone\",style:{width:\"395px\"},placeholder:\"Telefon belgi\",onChange:function onChange(e){e.target.value.length>=4&&e.target.value.length<=12&&e.target.value.slice(0,4)==\"+993\"&&setPhonenumber(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return CheckPhone();},children:dil===\"tm\"?\"Giriň\":dil===\"ru\"?\"Войти\":\"Login\"})]}),type==\"code\"&&/*#__PURE__*/_jsxs(\"div\",{className:\"login-container mt-10 rounded-[8px]\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h2\",children:dil===\"tm\"?\"Gaýtadan hoş geldiňiz\":dil===\"ru\"?\"Добро пожаловать\":\"Welcome Back\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p\",children:dil===\"tm\"?\"Girmek üçin tassyklaýyş kody giriziň!\":dil===\"ru\"?\"Введите свои учетные данные для доступа!\":\"Enter your credentials to access!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-container items-center flex\",children:[/*#__PURE__*/_jsx(CheckCircleFilled,{className:\"icon  \"}),/*#__PURE__*/_jsx(\"input\",{onKeyPress:function onKeyPress(e){return e.key==\"Enter\"?CheckCode():null;},className:\"input items-center flex text-center\",value:code,type:\"number\",autoFocus:type==\"phone\",style:{width:\"395px\"},placeholder:\"Tassyklaýyş kody\",onChange:function onChange(e){e.target.value.length<=5&&setCode(e.target.value);},required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:function onClick(){return CheckCode();},children:dil===\"tm\"?\"Giriň\":dil===\"ru\"?\"Войти\":\"Login\"})]})]});};export default Login;","map":{"version":3,"names":["React","useContext","useState","MailFilled","LockFilled","EyeFilled","EyeInvisibleFilled","PhoneFilled","CheckCircleFilled","message","axiosInstance","useHistory","SebedimContext","Login","dil","history","phonenumber","setPhonenumber","code","setCode","type","setType","CheckPhone","post","then","data","login","success","msg","warning","console","log","catch","err","warn","CheckCode","localStorage","setItem","JSON","stringify","push","pathname","e","key","width","target","value","length","slice"],"sources":["/Users/wekilos1902gmail.com/Desktop/kitaichi/kitaichi-admin/src/pages/login/login.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport {\n  MailFilled,\n  LockFilled,\n  EyeFilled,\n  EyeInvisibleFilled,\n  PhoneFilled,\n  CheckCircleFilled,\n} from \"@ant-design/icons\";\nimport { message } from \"antd\";\nimport \"antd/dist/antd.css\";\nimport \"./login.css\";\nimport { axiosInstance } from \"../../utils/axiosIntance\";\nimport { useHistory } from \"react-router-dom\";\nimport { SebedimContext } from \"../../context/sebedim\";\n\nconst Login = () => {\n  const { dil } = useContext(SebedimContext);\n  const history = useHistory();\n  const [phonenumber, setPhonenumber] = useState(\"+993\");\n  const [code, setCode] = useState(\"\");\n  const [type, setType] = useState(\"phone\");\n  const CheckPhone = () => {\n    axiosInstance\n      .post(\"/api/admin/login\", {\n        phonenumber: phonenumber,\n      })\n      .then((data) => {\n        if (data.data.login) {\n          setType(\"code\");\n          message.success(data.data.msg);\n        } else {\n          message.warning(data.data.msg);\n          console.log(data.data.msg);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        message.warn(err.msg);\n      });\n  };\n\n  const CheckCode = () => {\n    axiosInstance\n      .post(\"/api/admin/check\", {\n        phonenumber: phonenumber,\n        code: code,\n      })\n      .then((data) => {\n        console.log(data.data);\n        if (data.data.login) {\n          message.success(data.data.msg);\n          localStorage.setItem(\"userData\", JSON.stringify(data.data));\n          history.push({ pathname: \"/orders\" });\n        } else {\n          message.warning(data.data.msg);\n          console.log(data.data.msg);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        message.warn(err.msg);\n      });\n  };\n  return (\n    <div className=\"body\">\n      {/* <h2 className='logo' >Logo</h2> */}\n      {type == \"phone\" && (\n        <div className=\"login-container mt-10 rounded-[8px]\">\n          <h2 className=\"h2\">\n            {dil === \"tm\"\n              ? \"Gaýtadan hoş geldiňiz\"\n              : dil === \"ru\"\n              ? \"Добро пожаловать\"\n              : \"Welcome Back\"}\n          </h2>\n          <p className=\"p\">\n            {dil === \"tm\"\n              ? \"Girmek üçin şahsyýet maglumatlaryňyzy giriziň!\"\n              : dil === \"ru\"\n              ? \"Введите свои учетные данные для доступа!\"\n              : \"Enter your credentials to access!\"}\n          </p>\n\n          <div className=\"input-container items-center flex\">\n            <PhoneFilled className=\"icon rotate-[100deg]\" />\n            <input\n              onKeyPress={(e) => (e.key == \"Enter\" ? CheckPhone() : null)}\n              className=\"input items-center flex\"\n              value={phonenumber}\n              type=\"text\"\n              autoFocus={type == \"phone\"}\n              style={{ width: \"395px\" }}\n              placeholder={\"Telefon belgi\"}\n              onChange={(e) => {\n                e.target.value.length >= 4 &&\n                  e.target.value.length <= 12 &&\n                  e.target.value.slice(0, 4) == \"+993\" &&\n                  setPhonenumber(e.target.value);\n              }}\n              required\n            />\n          </div>\n\n          <button className=\"button\" onClick={() => CheckPhone()}>\n            {dil === \"tm\" ? \"Giriň\" : dil === \"ru\" ? \"Войти\" : \"Login\"}\n          </button>\n        </div>\n      )}\n      {type == \"code\" && (\n        <div className=\"login-container mt-10 rounded-[8px]\">\n          <h2 className=\"h2\">\n            {dil === \"tm\"\n              ? \"Gaýtadan hoş geldiňiz\"\n              : dil === \"ru\"\n              ? \"Добро пожаловать\"\n              : \"Welcome Back\"}\n          </h2>\n          <p className=\"p\">\n            {dil === \"tm\"\n              ? \"Girmek üçin tassyklaýyş kody giriziň!\"\n              : dil === \"ru\"\n              ? \"Введите свои учетные данные для доступа!\"\n              : \"Enter your credentials to access!\"}\n          </p>\n\n          <div className=\"input-container items-center flex\">\n            <CheckCircleFilled className=\"icon  \" />\n            <input\n              onKeyPress={(e) => (e.key == \"Enter\" ? CheckCode() : null)}\n              className=\"input items-center flex text-center\"\n              value={code}\n              type=\"number\"\n              autoFocus={type == \"phone\"}\n              style={{ width: \"395px\" }}\n              placeholder={\"Tassyklaýyş kody\"}\n              onChange={(e) => {\n                e.target.value.length <= 5 && setCode(e.target.value);\n              }}\n              required\n            />\n          </div>\n\n          <button className=\"button\" onClick={() => CheckCode()}>\n            {dil === \"tm\" ? \"Giriň\" : dil === \"ru\" ? \"Войти\" : \"Login\"}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}